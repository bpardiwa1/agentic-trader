# ---------------- Core ----------------
PORT=8001
EXECUTION_MODE=live
BROKER_BACKEND=mt5

MT5_PATH=C:\Program Files\MetaTrader 5\terminal64.exe
MT5_LOGIN=18023893
MT5_PASSWORD=VishyVahis786!
MT5_SERVER=VTMarkets-Live 3

AGENT_SYMBOLS=EURUSD-ECNc,XAUUSD-ECNc
AGENT_MAX_PER_SYMBOL=2
AGENT_MAX_OPEN=4
AGENT_TIMEFRAME=M15
AGENT_PERIOD_SEC=60

# Exposure guardrails
AGENT_BLOCK_SAME_SIDE=false
AGENT_COOLDOWN_MIN=2
AGENT_MARKET_CHECK=true

# Strategy routing
STRATEGY_DEFAULT=MOMENTUM
STRATEGY_EURUSD=MOMENTUM
STRATEGY_XAUUSD=MOMENTUM

# Risk guardrails (values in account currency; if ACCOUNT_CCY=USC, 100 = $1)
EQUITY_FLOOR=180
DAILY_LOSS_LIMIT=10
RISK_DOLLAR_PER_TRADE=6

# Paths and logging
JOURNAL_DIR=app/journal
DATA_DIR=data
VERBOSE=true
RELOAD=true
LOG_LEVEL=info

# ---------------- MT5 exec tweaks ----------------
MT5_STOP_WIDEN_MULT=2.0
MT5_ATTACH_RETRIES=5
MT5_ATTACH_DELAY_SEC=0.8
SLTP_MIN_ABS_XAUUSD=12.0
SLTP_MIN_ABS_NVDA=20.0
SLTP_MIN_ABS_MSFT=2.0

# ---------------- Momentum: FX ----------------
MOMENTUM_FX_EMA_FAST=50
MOMENTUM_FX_EMA_SLOW=200
MOMENTUM_FX_RSI_PERIOD=14
MOMENTUM_FX_ATR_PERIOD=14
MOMENTUM_FX_RSI_LONG_TH=50
MOMENTUM_FX_RSI_SHORT_TH=40
# MOMENTUM_FX_MIN_ATR=0.0003

# ---------------- Momentum: XAU ----------------
MOMENTUM_XAU_EMA_FAST=50
MOMENTUM_XAU_EMA_SLOW=200
MOMENTUM_XAU_RSI_PERIOD=14
MOMENTUM_XAU_ATR_PERIOD=14
MOMENTUM_XAU_RSI_LONG_TH=55
MOMENTUM_XAU_RSI_SHORT_TH=45
# MOMENTUM_XAU_MIN_ATR=2.0

# --- FX epsilon (pips) ---
# MOMENTUM_FX_LONG_EPS_PIPS=2.0
# MOMENTUM_FX_SHORT_EPS_PIPS=2.0

# --- XAU epsilon (pips where 1 pip = 0.1) ---
# MOMENTUM_XAU_LONG_EPS_PIPS=3.0   # = $0.3
# MOMENTUM_XAU_SHORT_EPS_PIPS=3.0  # = $0.3

# ---------------- Lot sizing ----------------
LOT_MODE=risk
OVERRIDE_STRATEGY_SIZE=1
RISK_PCT=0.01
MIN_LOT=0.01
MAX_LOT=1.00

# MT5_DEFAULT_LOTS is used as a fallback if LOTS_* is not set
MT5_DEFAULT_LOTS=0.03

# Per-symbol (key is normalized to UPPER + non-alnum -> '_'):
LOTS_EURUSD_ECNC=0.10
LOTS_XAUUSD_ECNC=0.05
LOTS_MSFT=1
LOTS_NVDA=1

MAX_TRADES_PER_SYMBOL=3
MAX_OPEN_POSITIONS=6
MIN_SYMBOL_FLOATING_PNL=-50

# ---------------- Loss monitor (these names must match the code) ----------------
LOSS_MAX_PER_TRADE=-100        # close a single trade if profit <= -100 (in account ccy units)
LOSS_MAX_PER_SYMBOL=-300       # close all trades on symbol if sum <= -300
LOSS_CLOSE_MODE=symbol         # "symbol" or "ticket"
LOSS_MONITOR_TF=M15
LOSS_MONITOR_COOLDOWN_MIN=10
ACCOUNT_CCY=USC

# ---------------- Trailing Stop Manager ----------------
TRAIL_ENABLE=true
TRAIL_MODE=PIPS
TRAIL_ATR_PERIOD=14
TRAIL_ATR_MULT=2.0
TRAIL_PIPS=20
TRAIL_START_PROFIT_PIPS=30
TRAIL_LOCK_PROFIT_PIPS=5
TRAIL_STEP_PIPS=1
TRAIL_ONLY_IN_PROFIT=true
TRAIL_REQUIRE_BIAS=false
TRAIL_TF=M15
TRAIL_FREQUENCY_MIN=0  # 0 for testing, 2+ for production

# ---------------- Bypass (optional) ----------------
STRATEGY_BYPASS=false
BYPASS_SIDE=LONG
BYPASS_SIZE=0.20
BYPASS_SL_PIPS=300
BYPASS_TP_PIPS=600
BYPASS_REQUIRE_EXECUTE=true

# ---------------- FVG (Fair Value Gap) ----------------
USE_FVG=0               # 0=disable, 1=enable for entries
FVG_LOOKBACK=100        # <-- fixed name (not LOOPBACK)
FVG_REQUIRE_TAP=1       # 1=require price inside the gap to allow a trade

# ---------------- Decider engine ----------------
DECIDER_USE_BUILTIN=1

# ---------------- Symbol Aliases (map broker suffixed to base MT5 symbol) ----------------
# Key format: SYMBOL_ALIAS_ + UPPERCASE(symbol with non-alnum -> '_')
# Value: the exact MT5 base symbol
SYMBOL_ALIAS_EURUSD_ECNC=EURUSD-ECNc
SYMBOL_ALIAS_XAUUSD_ECNC=XAUUSD-ECNc

AGENT_ALLOW_PYRAMID=true

# Family defaults
# FX_SL_PIPS=50
# FX_TP_PIPS=120
# XAU_SL_PIPS=200
# XAU_TP_PIPS=300

# how far beyond both EMAs price must be
MOMENTUM_FX_EPS=0.00010    # ~0.5 pip on EURUSD
MOMENTUM_XAU_EPS=0.3       # $0.30 on gold

# FX defaults
MOMENTUM_FX_SL_PIPS=40
MOMENTUM_FX_TP_PIPS=90

# Gold defaults
MOMENTUM_XAU_SL_PIPS=200
MOMENTUM_XAU_TP_PIPS=300

# Per-symbol (overrides family)
# SL_PIPS_EURUSD=50
# TP_PIPS_EURUSD=120

#SL_PIPS_XAUUSD=300
#TP_PIPS_XAUUSD=600



